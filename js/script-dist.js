"use strict";new Swiper(".swiper",{speed:1e3,spaceBetween:15,loop:!0,loopFillGroupWithBlank:!0,slidesPerView:"auto",longSwipesMs:300,touchRatio:.5,autoHeight:!0,centeredSlides:!0});function t(){document.querySelector("body").classList.toggle("_scroll-block")}var e,n,o,c,r,a,s,u,i,l,d,p,y=document.querySelector(".hamb"),v=document.querySelector(".popup"),q=document.querySelector(".menu");y.addEventListener("click",(function(){v.classList.toggle("_active"),y.classList.toggle("_active"),"МЕНЮ"==q.textContent?q.textContent="ЗАКРЫТЬ":q.textContent="МЕНЮ",t()})),document.querySelectorAll(".scroll-up").forEach((function(t){t.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})}))})),document.querySelector(".basket-button").addEventListener("click",(function(){document.querySelector(".basket").classList.toggle("_active"),t()})),e=document.querySelector(".basket-products"),n=document.querySelector(".basket"),o=n.querySelector(".total__title"),c=document.querySelector(".basket-quantity"),r=document.querySelector(".total-quantity-products"),a=JSON.parse(localStorage.getItem("cart"))||{},s=function(t){var n=t.productName,o=t.productPrice,c=t.productAbout,r=t.src,a=t.quantity,s=document.createElement("div"),u='\n      <div class="product__img">\n          <img src="'.concat(r,'" alt="фото товара">\n      </div>\n      <div class="product__body">\n          <div class="snacks__title product__title">\n              ').concat(n,'\n          </div>\n          <p class="product__about">\n              ').concat(c,'\n          </p>\n      </div>\n      <div class="product-edit">\n          <button class="minus">-</button>\n          <div class="quantity">\n              ').concat(a,'\n          </div>\n          <button class="plus">+</button>\n      </div>\n      <div class="product-price">\n          <div class="snacks__price">\n          ').concat(o*a,'\n          </div>\n          <button class="product-delete">X</button>\n      </div>\n    ');s.innerHTML=u,s.classList.add("product"),s.classList.add("".concat(n)),e.appendChild(s)},u=function(t){var e=n.querySelector(".totalEnough"),o=n.querySelector(".total__need4free"),c=n.querySelector(".total__need4free-rubles"),r=n.querySelector(".total__min"),a=750;a>0&&(a=r.textContent-t,o.textContent=a,e.textContent="До бесплатной доставки не хватет:",o.style.display="inline-block",c.style.display="inline-block"),a<=0&&(e.textContent="У вас доставка будет бесплатной",o.style.display="none",c.style.display="none")},i=function(){var t,e;t=Object.keys(a).reduce((function(t,e){var n=a[e],o=n.quantity;return t+n.productPrice*o}),0),o&&(o.textContent=t),u(t),e=Object.keys(a).reduce((function(t,e){return t+a[e].quantity}),0),c&&(c.textContent=e,r.textContent=e),localStorage.setItem("cart",JSON.stringify(a))},l=function(t,e){delete a[t],e.parentNode.removeChild(e),i()},d=function(t,n){var o=e.querySelector(".".concat(t)),c=o.querySelector(".quantity"),r=o.querySelector(".snacks__price");a[t].quantity=n,c.textContent=n,r.textContent=n*a[t].productPrice,i()},p=function(t){var e=a[t].quantity+1;d(t,e)},Object.keys(a).forEach((function(t){return s(a[t])})),i(),addEventListener("click",(function(t){var n=t.target;if(n.classList.contains("basketDefault")&&(t.preventDefault(),function(t){var e=t.productName;a[e]?p(e):(a[e]=t,s(t),i())}(function(t){var e=t.querySelector(".snacks__title").textContent,n=t.querySelector(".snacks__about").textContent;return{productName:e,productPrice:+t.querySelector(".snacks__price").textContent,productAbout:n,src:t.querySelector("img").getAttribute("src"),quantity:1}}(n.closest(".snacks")))),n.classList.contains("product-delete")){t.preventDefault();var o=n.closest(".product"),c=o.querySelector(".product__title").textContent.trim();l(c,o)}if(n.classList.contains("plus")){t.preventDefault();var r=n.closest(".product").querySelector(".product__title").textContent.trim();p(r)}n.classList.contains("minus")&&(t.preventDefault(),function(t){if(a[t].quantity>=1){var n=a[t].quantity-1;d(t,n)}if(0===a[t].quantity){var o=e.querySelector(".".concat(t));l(t,o),i()}}(n.closest(".product").querySelector(".product__title").textContent.trim()))})),ymaps.ready((function(){var t=new ymaps.Map("map",{center:[54.193616,45.16065],zoom:17},{searchControlProvider:"yandex#search"}),e=new ymaps.Placemark([54.193616,45.16065],{balloonContentHeader:"#ГРИЛЛЬ экспресс",balloonContentBody:"улица Титова, 10с1",balloonContentFooter:"Мы здесь",hintContent:"Посмотреть адресс",size:800});t.geoObjects.add(e)}));