"use strict";new Swiper(".swiper",{speed:1e3,spaceBetween:15,slidesPerView:"auto",longSwipesMs:300,touchRatio:.5,autoHeight:!0,centeredSlides:!0});function t(){document.querySelector("body").classList.toggle("_scroll-block")}var e,n,c,o,r,u,s,i,a,l,d,p,y=document.querySelector(".hamb"),v=document.querySelector(".popup"),q=document.querySelector(".menu");y.addEventListener("click",(function(){v.classList.toggle("_active"),y.classList.toggle("_active"),"МЕНЮ"==q.textContent?q.textContent="ЗАКРЫТЬ":q.textContent="МЕНЮ",t()})),document.querySelectorAll(".scroll-up").forEach((function(t){t.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})}))})),document.querySelector(".basket-button").addEventListener("click",(function(){document.querySelector(".basket").classList.toggle("_active"),t()})),e=document.querySelector(".basket-products"),n=document.querySelector(".basket"),c=n.querySelector(".total__title"),o=document.querySelector(".basket-quantity"),r=document.querySelector(".total-quantity-products"),u=JSON.parse(localStorage.getItem("cart"))||{},s=function(t){var n=t.productName,c=t.productPrice,o=t.productAbout,r=t.src,u=t.quantity,s=document.createElement("div"),i='\n      <div class="product__img">\n          <img src="'.concat(r,'" alt="фото товара">\n      </div>\n      <div class="product__body">\n          <div class="snacks__title product__title">\n              ').concat(n,'\n          </div>\n          <p class="product__about">\n              ').concat(o,'\n          </p>\n      </div>\n      <div class="product-edit">\n          <button class="minus">-</button>\n          <div class="quantity">\n              ').concat(u,'\n          </div>\n          <button class="plus">+</button>\n      </div>\n      <div class="product-price">\n          <div class="snacks__price">\n          ').concat(c*u,'\n          </div>\n          <button class="product-delete">X</button>\n      </div>\n    ');s.innerHTML=i,s.classList.add("product"),s.classList.add("".concat(n)),e.appendChild(s)},i=function(t){var e=n.querySelector(".totalEnough"),c=n.querySelector(".total__need4free"),o=n.querySelector(".total__need4free-rubles"),r=n.querySelector(".total__min"),u=750;u>0&&(u=r.textContent-t,c.textContent=u,e.textContent="До бесплатной доставки не хватет:",c.style.display="inline-block",o.style.display="inline-block"),u<=0&&(e.textContent="У вас доставка будет бесплатной",c.style.display="none",o.style.display="none")},a=function(){var t,e;t=Object.keys(u).reduce((function(t,e){var n=u[e],c=n.quantity;return t+n.productPrice*c}),0),c&&(c.textContent=t),i(t),e=Object.keys(u).reduce((function(t,e){return t+u[e].quantity}),0),o&&(o.textContent=e,r.textContent=e),localStorage.setItem("cart",JSON.stringify(u))},l=function(t,e){delete u[t],e.parentNode.removeChild(e),a()},d=function(t,n){var c=e.querySelector(".".concat(t)),o=c.querySelector(".quantity"),r=c.querySelector(".snacks__price");u[t].quantity=n,o.textContent=n,r.textContent=n*u[t].productPrice,a()},p=function(t){var e=u[t].quantity+1;d(t,e)},Object.keys(u).forEach((function(t){return s(u[t])})),a(),addEventListener("click",(function(t){var n=t.target;if(n.classList.contains("basketDefault")&&(t.preventDefault(),function(t){var e=t.productName;u[e]?p(e):(u[e]=t,s(t),a())}(function(t){var e=t.querySelector(".snacks__title").textContent,n=t.querySelector(".snacks__about").textContent;return{productName:e,productPrice:+t.querySelector(".snacks__price").textContent,productAbout:n,src:t.querySelector("img").getAttribute("src"),quantity:1}}(n.closest(".snacks")))),n.classList.contains("product-delete")){t.preventDefault();var c=n.closest(".product"),o=c.querySelector(".product__title").textContent.trim();l(o,c)}if(n.classList.contains("plus")){t.preventDefault();var r=n.closest(".product").querySelector(".product__title").textContent.trim();p(r)}n.classList.contains("minus")&&(t.preventDefault(),function(t){if(u[t].quantity>=1){var n=u[t].quantity-1;d(t,n)}if(0===u[t].quantity){var c=e.querySelector(".".concat(t));l(t,c),a()}}(n.closest(".product").querySelector(".product__title").textContent.trim()))}));